<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <!-- Vista de formulario para el agregar maquinaria al inventario -->
        <record id="machinery_inventory_form" model="ir.ui.view">
            <field name="name">machinery.inventory.form</field>
            <field name="model">machinery.inventory</field>
            <field name="arch" type="xml">
                <form string="Datos de la maquinaria a registrar">
                    <sheet>
                        <group>
                            <group>
                                <field name="registered_client"
                                       placeholder="Seleccione el estado del propietario"
                                />
                                <field name="partner_id"
                                       placeholder="Seleccione el propietario"
                                       attrs="{'invisible': [('registered_client', '=', 'no registrado')]}"
                                />
                                <field name="ref_new_client"
                                       placeholder="Seleccion el propietario"
                                       attrs="{'invisible': [('registered_client', '=', 'registrado')]}"
                                />
                            </group>

                            <group>
                                <label for="" name="country_id">
                                    <b>Dirección de la maquinaria</b>
                                </label>
                                <div class="o_address_format">
                                    <field name="country_id"
                                           placeholder="Introduzca el país"
                                           class="o_address_country"
                                           options="{'no_create': True, 'no_create_edit': True}"
                                    />
                                    <field name="state_id"
                                           context="{ 'country_id':country_id, 'zip':zip }"
                                           domain="[('country_id', '=?', country_id)]"
                                           placeholder="Estado"
                                           class="o_address_state"
                                           options="{'no_create': True, 'no_create_edit': True}"
                                    />
                                    <field name="city_id"
                                           context="{ 'state_id':state_id, 'zip':zip }"
                                           domain="[('state_id', '=?', state_id)]"
                                           placeholder="Ciudad"
                                           class="o_address_city"
                                           options="{'no_create': True, 'no_create_edit': True}"
                                    />
                                    <field name="calle"
                                           placeholder="Dirección"
                                           class="o_address_street"
                                    />
                                    <field name="calle2"
                                           placeholder="Dirección 2"
                                           class="o_address_street"
                                    />
                                    <field name="zip"
                                           placeholder="Código postal"
                                           class="o_address_zip"
                                    />
                                </div>
                            </group>

                            <div>
                                <h3>Agregar maquinaria</h3>
                                <field name="maquinaria"
                                       style="width: 1050px;"
                                       widget="many2many"
                                       domain="[
                                       ('status_id', '=', 'activo'),
                                       ('partner_ref', '!=', True)
                                       ]"
                                />
                            </div>
                        </group>
                    </sheet>
                </form>
            </field>
        </record>

        <!-- Vista de lista de la maquinaria -->
        <record id="machinery_inventory_tree" model="ir.ui.view">
            <field name="name">machinery.inventory.tree</field>
            <field name="model">machinery.inventory</field>
            <field name="arch" type="xml">
                <tree string="Lista de maquinaria">
                    <field name="inventory_name" string="Propietario de la maquinaria" />
                    <field name="maquinaria" string="Maquinaria registrada" />
                    <field name="country_id" string="País" />
                </tree>
            </field>
        </record>
    </data>
</odoo>