<odoo>

  <data>

     <record id="registro_pagos_diferido_form" model="ir.ui.view">
                <field name="name">registro.pagos.diferidos.form</field>
                <field name="model">registro.pagos.diferidos</field>
                <field name="arch" type="xml">
                    <form string="Registro de proceso diferidos">
                        <header>
                            <button name="action_confirm" string="Calcular" type="object" class="on_highlight" attrs="{'invisible': [('state', 'in', ('1', '2'))]}"/>
                            <button name="action_asignar" string="Asignar a costo de venta" type="object" class="on_highlight" attrs="{'invisible': [('state', 'in', ('0','2'))]}"/>
                            <field name="state" widget="statusbar" statusbar_visible="0,1,2" statusbar_colors="{'active':'blue'}" string="Estado"/>

                        </header>
                        <sheet>
                            <div class="oe_button_box" name="button_box">
                                <button type="object"
                                   name="action_view_movimientos_ids"
                                   class="oe_stat_button"
                                   icon="fa-pinterest"
                                   string="Apuntes Contables"
                                   attrs="{'invisible': [('state', '!=', ('2'))]}">
                                  <field name="movimiento_proyectos" invisible="1"/>
                               </button>
                                <field name="condicional_revert" invisible="1"/>
                                <button type="object"
                                   name="action_view_movimientos_diferidos_ids"
                                   class="oe_stat_button"
                                   icon="fa-money"
                                   string="Apuntes Contables revertidos"
                                   attrs="{'invisible': [('condicional_revert', '!=', True)]}">
                                  <field name="movimiento_revert" invisible="1"/>
                               </button>

                            </div>
                            <div class="oe_title">
                            <h1>
                                <field name="name" placeholder="Nombre del registro" required="True" attrs="{'readonly': [('state', 'in', ('1','2'))]}"/>
                            </h1>
                            </div>
                            <group col="2">
                                <label for="date_from" string="Mes de registro"/>
                                <div>
                                    <field name="mes" class="oe_inline" attrs="{'readonly': [('state', 'in', ('1','2'))]}" required="1"/>-<field name="year" class="oe_inline" attrs="{'readonly': [('state', 'in', ('1','2'))]}" required="1"/>
                                </div>
                            </group>

                            <group string="Información" col="4">
                                <field name="porcentaje" string="Tarifa de mano de obra para el calculo de ingreso diferido" attrs="{'readonly': [('state', 'in', ('1','2'))]}"/>
                                <field name="bank_journal_id" attrs="{'readonly': [('state', 'in', ('1','2'))]}"/>
                                <field name="date" string="Fecha de registro" readonly="1" force_save="1"/>
                                <field name="company_id" />
                            </group>
                             <div class="col-sm text-center">
                                 <h2> </h2>
                                <h2>Registros Proyectos y montos diferidos</h2>
                            </div>
                                 <field name="pagos_ids"
                                    widget="section_and_note_one2many"
                                    attrs="{'readonly': [('state', 'in', ('1','2'))]}">

                                </field>

                        </sheet>
                    </form>
                </field>
            </record>

        <record model="ir.rule" id="record_not_shared_multi_company_rule_pagos_diferidos">
            <field name="name">Non Shared Records:model</field>
            <field name="model_id" ref="3mit_ingreso_credito_diferido.model_registro_pagos_diferidos"/>
            <field name="global" eval="True"/>
            <field name="domain_force">
               [('company_id', 'in', company_ids)]
            </field>
        </record>

    <record id="registro_pagos_diferido_tree" model="ir.ui.view">
        <field name="name">registro.pagos.diferidos.tree</field>
        <field name="model">registro.pagos.diferidos</field>
        <field name="arch" type="xml">
            <tree string="Información" default_order="id desc">
                <field name="name" string="Nombre" />
                <field name="mes" string="Mes diferido"/>
                <field name="year" string="año diferido"/>
                <field name="date" string="Fecha" />
                <field name="state" string="Estado" />
                <field name="company_id" string="Compañia" />
            </tree>
        </field>
    </record>

      <record id="registro_pagos_diferido_lines_tree" model="ir.ui.view">
        <field name="name">registro.pagos.diferidos.lines.tree</field>
        <field name="model">pagos.diferidos.lines</field>
        <field name="arch" type="xml">
            <tree string="Información" editable="bottom" create="0"  decoration-success="aviso==True">
                <field name="proyecto_id" />
                <field name="marca_id"/>
                <field name="horas"/>
                <field name="monto"/>
                <field name="total_gastos"/>
                <field name="aviso" invisible="1"/>
                <field name="valor_pago" options='{"bg_color": "aqua:aviso != True","fg_color": "black:aviso != True"}'/>
                <field name="acumulado" options='{"bg_color": "white:aviso != True","fg_color": "black:aviso != True"}'/>
                <field name="date" invisible="1"/>

            </tree>
        </field>
    </record>


    <record id="act_pagos_diferidos_form" model="ir.actions.act_window">
        <field name="name">Registro de ingresos diferidos</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">registro.pagos.diferidos</field>
        <field name="view_mode">tree,form</field>
    </record>

    <menuitem
         id="action_pagos_diferidos_principal"
         parent="account.menu_finance_entries"
         name="Proceso diferidos por proyectos"
         sequence="50"
    />
    <menuitem
         id="action_pagos_diferidos"
         parent="action_pagos_diferidos_principal"
         action="act_pagos_diferidos_form"
         name="Registros diferidos"
         sequence="50"
    />


  </data>
</odoo>